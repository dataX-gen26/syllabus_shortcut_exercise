# ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚­ãƒ¼åˆ¥è§£ãƒ»è¤‡æ•°æ®µéšå…¥åŠ› å¯¾å¿œ å®Ÿè£…è¨­è¨ˆæ›¸ (æ”¹è¨‚ç‰ˆ)

## 1. æ¦‚è¦

æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆæ¼”ç¿’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãŠã„ã¦ã€ä¸€ã¤ã®èª²é¡Œã«å¯¾ã—ã¦**è¤‡æ•°ã®æ­£è§£ã‚­ãƒ¼ã‚³ãƒ³ãƒ“ãƒãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆåˆ¥è§£ï¼‰**ãŠã‚ˆã³ã€**è¤‡æ•°æ®µéšã®ã‚­ãƒ¼å…¥åŠ›ï¼ˆã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ£ãƒ«å…¥åŠ›ï¼‰**ã‚’è¨±å®¹ã™ã‚‹ãŸã‚ã®ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆã‚’å®šç¾©ã™ã‚‹ã€‚

## 2. ç›®çš„

- **åˆ¥è§£ã¸ã®å¯¾å¿œ**: `Option` ã¨ `Alt` ã®ã‚ˆã†ã«ã€ç’°å¢ƒã«ã‚ˆã£ã¦å‘¼ã³æ–¹ãŒç•°ãªã‚‹ãŒåŒã˜å‹•ä½œã‚’ã™ã‚‹ã‚­ãƒ¼ã‚„ã€è¤‡æ•°ã®å…¥åŠ›æ–¹æ³•ãŒè¨±å®¹ã•ã‚Œã¦ã„ã‚‹ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã«å¯¾å¿œã™ã‚‹ã€‚
- **ã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ£ãƒ«å…¥åŠ›ã¸ã®å¯¾å¿œ**: `Alt + I` ã‚’æŠ¼ã—ãŸå¾Œã« `W` ã‚’æŠ¼ã™ã€ã¨ã„ã£ãŸè¤‡æ•°ã‚¹ãƒ†ãƒƒãƒ—ã§æ§‹æˆã•ã‚Œã‚‹ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚’æ­£ã—ãåˆ¤å®šãƒ»è¡¨ç¤ºã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚

## 3. å®Ÿè£…æ–¹é‡

- **ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®æ‹¡å¼µ**: `@src/composables/shortcutsList.js` ã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’ã€Œ**ã‚¹ãƒ†ãƒƒãƒ—ã®é…åˆ—ã®é…åˆ—**ã€ã«æ‹¡å¼µã™ã‚‹ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å˜ç´”ãªåŒæ™‚æŠ¼ã—ã€ãã®åˆ¥è§£ã€ãã—ã¦è¤‡æ•°æ®µéšã®ã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ£ãƒ«ãªã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚’çµ±ä¸€çš„ã«è¡¨ç¾ã™ã‚‹ã€‚
- **ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«ãªåˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯**: ã‚­ãƒ¼å…¥åŠ›ã‚’åˆ¤å®šã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚’ã€ç¾åœ¨ã®å…¥åŠ›ã‚¹ãƒ†ãƒƒãƒ—ã‚’ç®¡ç†ã™ã‚‹**ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«ãªï¼ˆçŠ¶æ…‹ã‚’æŒã¤ï¼‰**ã‚‚ã®ã«å¤‰æ›´ã™ã‚‹ã€‚ã“ã®çŠ¶æ…‹ç®¡ç†ã¯ã€ã‚­ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç›´æ¥å—ã‘å–ã‚‹Vueã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (`practice.vue`, `test.vue`) ãŒæ‹…ã†ã€‚
- **è¡¨ç¤ºã®æ›´æ–°**: æ­£è§£ã‚­ãƒ¼ã‚’è¡¨ç¤ºã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä¿®æ­£ã—ã€ã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ£ãƒ«ãªå…¥åŠ›ã‚„åˆ¥è§£ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«åˆ†ã‹ã‚Šã‚„ã™ãæç¤ºã™ã‚‹ã€‚

## 4. ãƒ•ã‚¡ã‚¤ãƒ«ã”ã¨ã®å¤‰æ›´è©³ç´°

### 4.1. `@src/composables/shortcutsList.js`

**å¤‰æ›´ç‚¹**: `keys` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å€¤ã‚’ã€Œã‚¹ãƒ†ãƒƒãƒ—ã®é…åˆ—ã®é…åˆ—ã€ã¨ã„ã†3éšå±¤ã®é…åˆ—æ§‹é€ ã«å¤‰æ›´ã™ã‚‹ã€‚

- **ç¬¬1éšå±¤ (ä¸€ç•ªå¤–å´)**: **åˆ¥è§£**ã®é…åˆ— (ORæ¡ä»¶)
- **ç¬¬2éšå±¤**: **å…¥åŠ›ã‚¹ãƒ†ãƒƒãƒ—**ã®é…åˆ— (ANDæ¡ä»¶ã€ã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ£ãƒ«)
- **ç¬¬3éšå±¤ (ä¸€ç•ªå†…å´)**: å„ã‚¹ãƒ†ãƒƒãƒ—ã§**åŒæ™‚æŠ¼ã—**ã™ã‚‹ã‚­ãƒ¼ã®é…åˆ—

**ãƒ‡ãƒ¼ã‚¿æ§‹é€ :**
```javascript
{
  // ...
  keys: {
    windows: [ /* åˆ¥è§£é…åˆ— */ [ /* ã‚¹ãƒ†ãƒƒãƒ—é…åˆ— */ [ /* åŒæ™‚æŠ¼ã—ã‚­ãƒ¼é…åˆ— */ ] ] ],
    mac: [ [ ['cmd', 'a'] ] ]
  }
}
```

**ä¾‹1: å˜ç´”ãªåŒæ™‚æŠ¼ã— (`Cmd + A`)**
```javascript
// 1ã¤ã®åˆ¥è§£ã€1ã¤ã®ã‚¹ãƒ†ãƒƒãƒ—ã€2ã‚­ãƒ¼ã®åŒæ™‚æŠ¼ã—
keys: { mac: [ [ ['cmd', 'a'] ] ] }
```

**ä¾‹2: åˆ¥è§£ã®ã‚ã‚‹åŒæ™‚æŠ¼ã— (`Option+Shift+5` ã¾ãŸã¯ `Alt+Shift+5`)**
```javascript
// 2ã¤ã®åˆ¥è§£ã€å„1ã‚¹ãƒ†ãƒƒãƒ—
keys: { mac: [ [ ['option', 'shift', '5'] ], [ ['alt', 'shift', '5'] ] ] }
```

**ä¾‹3: ã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ£ãƒ«å…¥åŠ› (`Alt+I` â†’ `W`)**
```javascript
// 1ã¤ã®åˆ¥è§£ã€2ã¤ã®ã‚¹ãƒ†ãƒƒãƒ—
keys: { windows: [ [ ['alt', 'i'], ['w'] ] ] }
```

**ä¾‹4: åˆ¥è§£ã®ã‚ã‚‹ã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ£ãƒ«å…¥åŠ› (ä»®)**
```javascript
// 2ã¤ã®åˆ¥è§£ï¼ˆ1ã¤ã¯ã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ£ãƒ«ã€ã‚‚ã†1ã¤ã¯åŒæ™‚æŠ¼ã—ï¼‰
keys: {
  windows: [
    [ ['alt', 'i'], ['w'] ],              // åˆ¥è§£1 (ã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ£ãƒ«)
    [ ['ctrl', 'shift', 'arrowdown'] ]   // åˆ¥è§£2 (åŒæ™‚æŠ¼ã—)
  ]
}
```
> **[NOTE]** ã“ã®æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã«åˆã‚ã›ã¦ã€æ—¢å­˜ã®å…¨ã¦ã®ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ç§»è¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

### 4.2. `@src/composables/shortcutUtils.js`

**å¤‰æ›´ç‚¹**: ãƒ¡ã‚¤ãƒ³ã®åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ãŒVueã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ç§»ã‚‹ãŸã‚ã€ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ä¸»ã«ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’æä¾›ã™ã‚‹å½¹å‰²ã¨ãªã‚‹ã€‚

- **`isShortcutEventMatch`**: ã“ã®é–¢æ•°ã¯å»ƒæ­¢ã€ã¾ãŸã¯å˜ä¸€ã‚¹ãƒ†ãƒƒãƒ—ã®åŒæ™‚æŠ¼ã—åˆ¤å®šã«ç‰¹åŒ–ã—ãŸ `isSinglePatternMatch` ã®ã‚ˆã†ãªå†…éƒ¨ãƒ˜ãƒ«ãƒ‘ãƒ¼ã«ç½®ãæ›ã‚ã‚‹ã€‚ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå´ã§å®Ÿè£…ã•ã‚Œã‚‹ãŸã‚ã€`export` ã™ã‚‹å¿…è¦ã¯ãªããªã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚

- **(ä¿®æ­£) `formatAnswerKeys(answerPatterns)`**:
  - æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’å—ã‘å–ã‚Šã€ã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ£ãƒ«å…¥åŠ›ã¨åˆ¥è§£ã®ä¸¡æ–¹ã‚’è¡¨ç¾ã§ãã‚‹è¡¨ç¤ºç”¨æ–‡å­—åˆ—ã‚’ç”Ÿæˆã™ã‚‹ã‚ˆã†ã«ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ›´æ–°ã™ã‚‹ã€‚
  - ã‚¹ãƒ†ãƒƒãƒ—é–“ã¯ `â†’` ã§ã€åˆ¥è§£é–“ã¯ ` / ` ã§é€£çµã™ã‚‹ã€‚

  **å®Ÿè£…ã‚¤ãƒ¡ãƒ¼ã‚¸:**
  ```javascript
  // å˜ä¸€ã‚¹ãƒ†ãƒƒãƒ—ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: ['cmd', 'a'] -> "Cmd + A"
  function formatStep(stepKeys) {
    return stepKeys.map(key => key.charAt(0).toUpperCase() + key.slice(1)).join(' + ');
  }

  // å˜ä¸€ã®æ­£è§£ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: [['alt', 'i'], ['w']] -> "Alt + I â†’ W"
  function formatPattern(pattern) {
    return pattern.map(formatStep).join(' â†’ ');
  }

  // å…¨ã¦ã®åˆ¥è§£ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
  export function formatAnswerKeys(answerPatterns) {
    if (!answerPatterns || answerPatterns.length === 0) return '';
    return answerPatterns.map(formatPattern).join(' / ');
  }
  ```

### 4.3. Vueã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (`practice.vue`, `test.vue`)

**å¤‰æ›´ç‚¹**: ã‚­ãƒ¼å…¥åŠ›ã®åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ã‚’ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§çŠ¶æ…‹ã‚’ç®¡ç†ã—ãªãŒã‚‰è¡Œã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€è¤‡æ•°ã‚¹ãƒ†ãƒƒãƒ—ã«ã¾ãŸãŒã‚‹å…¥åŠ›ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚’æ­£ã—ãè¿½è·¡ã§ãã¾ã™ã€‚

#### ç®¡ç†ã™ã‚‹çŠ¶æ…‹ (State)

ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã® `<script setup>` å†…ã§ã€ä»¥ä¸‹ã®3ã¤ã®ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªçŠ¶æ…‹ã‚’å®šç¾©ã—ã¾ã™ã€‚

```javascript
import { ref } from 'vue';

// ç¾åœ¨ã©ã®åˆ¥è§£ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è©¦è¡Œä¸­ã‹ã‚’ç¤ºã™ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ (-1: è©¦è¡Œä¸­ã§ã¯ãªã„)
const activePatternIndex = ref(-1);
// è©¦è¡Œä¸­ã®ãƒ‘ã‚¿ãƒ¼ãƒ³å†…ã§ã€æ¬¡ã«æˆåŠŸã•ã›ã‚‹ã¹ãã‚¹ãƒ†ãƒƒãƒ—ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ (0ã‹ã‚‰é–‹å§‹)
const currentStepIndex = ref(0);
// å…¥åŠ›ã‚¹ãƒ†ãƒƒãƒ—é–“ã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’ç®¡ç†ã™ã‚‹ã‚¿ã‚¤ãƒãƒ¼ID
let resetTimer = null;
```

#### æ­£èª¤åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ãƒ•ãƒ­ãƒ¼

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã® `keydown` ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç”Ÿã™ã‚‹ãŸã³ã«ã€ä»¥ä¸‹ã®ãƒ•ãƒ­ãƒ¼ã§æ­£èª¤ã‚’åˆ¤å®šã—ã¾ã™ã€‚

**å‰æ:**
- `answerPatterns`: ç¾åœ¨ã®å•é¡Œã®æ­£è§£ãƒ‘ã‚¿ãƒ¼ãƒ³ç¾¤ã€‚ä¾‹: `[ [ ['alt', 'i'], ['w'] ], [ ['ctrl', 'j'] ] ]`
- `isSinglePatternMatch(event, keys)`: `event` ãŒ `keys` (åŒæ™‚æŠ¼ã—) ã¨ä¸€è‡´ã™ã‚‹ã‹åˆ¤å®šã™ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã€‚

---

**â–¼ `handleKeyDown(event)` å‡¦ç†é–‹å§‹**

1.  **ã‚¿ã‚¤ãƒãƒ¼è§£é™¤**: `clearTimeout(resetTimer)` ã‚’å®Ÿè¡Œã—ã€å‰å›ã®å…¥åŠ›ã‹ã‚‰ã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ã¾ã™ã€‚

2.  **é€²è¡Œä¸­ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒã‚ã‚‹ã‹ï¼Ÿ (`activePatternIndex !== -1`)**
    *   **YES (ã‚·ãƒ¼ã‚±ãƒ³ã‚¹è¿½è·¡ä¸­)**
        a.  ç¾åœ¨è¿½è·¡ä¸­ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ `currentPattern = answerPatterns[activePatternIndex.value]` ã‚’å–å¾—ã—ã¾ã™ã€‚
        b.  æ¬¡ã«æˆåŠŸã•ã›ã‚‹ã¹ãã‚¹ãƒ†ãƒƒãƒ— `nextStepKeys = currentPattern[currentStepIndex.value]` ã‚’å–å¾—ã—ã¾ã™ã€‚
        c.  ç¾åœ¨ã®ã‚­ãƒ¼å…¥åŠ› `event` ãŒ `nextStepKeys` ã¨ä¸€è‡´ã™ã‚‹ã‹ `isSinglePatternMatch` ã§åˆ¤å®šã—ã¾ã™ã€‚
            *   **ä¸€è‡´ã—ãŸ (Correct Step):**
                i.  `currentStepIndex` ã‚’ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã—ã¾ã™ (`++`)ã€‚
                ii. **å…¨ã‚¹ãƒ†ãƒƒãƒ—å®Œäº†ã‹ï¼Ÿ** (`currentStepIndex >= currentPattern.length`)
                    *   **YES (æœ€çµ‚ã‚¹ãƒ†ãƒƒãƒ—æˆåŠŸ):**
                        - **ã€ğŸ‰ æ­£è§£ï¼ã€‘**
                        - æ­£è§£å‡¦ç†ï¼ˆã‚¹ã‚³ã‚¢åŠ ç®—ã€æ¬¡ã®å•é¡Œã¸é€²ã‚€ãªã©ï¼‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
                        - `resetState()` ã‚’å‘¼ã³å‡ºã—ã¦ã€æ¬¡ã®å•é¡Œã«å‚™ãˆã¦çŠ¶æ…‹ã‚’åˆæœŸåŒ–ã—ã¾ã™ã€‚
                        - å‡¦ç†ã‚’çµ‚äº†ã—ã¾ã™ã€‚
                    *   **NO (ã¾ã æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ãŒã‚ã‚‹):**
                        - æ¬¡ã®ã‚­ãƒ¼å…¥åŠ›ã‚’å¾…ã¤ãŸã‚ã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’è¨­å®šã—ã¾ã™ (`resetTimer = setTimeout(resetState, 1500)`)ã€‚
                        - å‡¦ç†ã‚’çµ‚äº†ã—ã¾ã™ã€‚
            *   **ä¸€è‡´ã—ãªã‹ã£ãŸ (Incorrect Step):**
                - é€²è¡Œä¸­ã®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã¯å¤±æ•—ã§ã™ã€‚**çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ (`resetState()`) ã—ã¾ã™ã€‚**
                - **ãŸã ã—ã€ã“ã“ã§å‡¦ç†ã‚’ä¸­æ–­ã—ã¾ã›ã‚“ã€‚** ã“ã®é–“é•ã£ãŸã‚­ãƒ¼å…¥åŠ›ãŒã€*åˆ¥ã®åˆ¥è§£ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æœ€åˆã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã‚ã‚‹å¯èƒ½æ€§*ãŒã‚ã‚‹ãŸã‚ã€ãã®ã¾ã¾ã‚¹ãƒ†ãƒƒãƒ—3ã®ã€Œå¾…æ©ŸçŠ¶æ…‹ã®å‡¦ç†ã€ã«é€²ã¿ã¾ã™ã€‚

    *   **NO (å¾…æ©ŸçŠ¶æ…‹)**
        *   ã‚¹ãƒ†ãƒƒãƒ—3ã«é€²ã¿ã¾ã™ã€‚

3.  **æ–°ã—ã„ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é–‹å§‹ã§ãã‚‹ã‹ï¼Ÿ (å¾…æ©ŸçŠ¶æ…‹ã‹ã‚‰ã®ãƒã‚§ãƒƒã‚¯)**
    a.  å…¨ã¦ã®åˆ¥è§£ãƒ‘ã‚¿ãƒ¼ãƒ³ `answerPatterns` ã‚’ãƒ«ãƒ¼ãƒ—ã§ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ (`for (let i = 0; ...)`ï¼‰ã€‚
    b.  å„ãƒ‘ã‚¿ãƒ¼ãƒ³ã®**æœ€åˆã®ã‚¹ãƒ†ãƒƒãƒ—** `firstStepKeys = answerPatterns[i][0]` ã‚’å–å¾—ã—ã¾ã™ã€‚
    c.  ç¾åœ¨ã®ã‚­ãƒ¼å…¥åŠ› `event` ãŒ `firstStepKeys` ã¨ä¸€è‡´ã™ã‚‹ã‹ `isSinglePatternMatch` ã§åˆ¤å®šã—ã¾ã™ã€‚
        *   **ä¸€è‡´ã—ãŸ (New Pattern Started):**
            i.  **ãã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯1ã‚¹ãƒ†ãƒƒãƒ—ã®ã¿ã‹ï¼Ÿ** (`answerPatterns[i].length === 1`)
                *   **YES (å˜ç™ºã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆæˆåŠŸ):**
                    - **ã€ğŸ‰ æ­£è§£ï¼ã€‘**
                    - æ­£è§£å‡¦ç†ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
                    - `resetState()` ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚
                    - å‡¦ç†ã‚’çµ‚äº†ã—ã¾ã™ã€‚
                *   **NO (ã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ£ãƒ«å…¥åŠ›ã®é–‹å§‹):**
                    - çŠ¶æ…‹ã‚’æ›´æ–°ã—ã¦ã€ã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã®è¿½è·¡ã‚’é–‹å§‹ã—ã¾ã™ã€‚
                        - `activePatternIndex.value = i`
                        - `currentStepIndex.value = 1` (ã‚¹ãƒ†ãƒƒãƒ—0ã¯æˆåŠŸã—ãŸã®ã§ã€æ¬¡ã¯ã‚¹ãƒ†ãƒƒãƒ—1)
                    - æ¬¡ã®ã‚­ãƒ¼å…¥åŠ›ã®ãŸã‚ã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’è¨­å®šã—ã¾ã™ (`resetTimer = setTimeout(resetState, 1500)`)ã€‚
                    - å‡¦ç†ã‚’çµ‚äº†ã—ã¾ã™ï¼ˆä»–ã®åˆ¥è§£ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ï¼‰ã€‚
        *   **ä¸€è‡´ã—ãªã‹ã£ãŸ:**
            - ãƒ«ãƒ¼ãƒ—ã‚’ç¶™ç¶šã—ã€æ¬¡ã®åˆ¥è§£ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚

4.  **ã©ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã‚‚ä¸€è‡´ã—ãªã‹ã£ãŸå ´åˆ**
    *   ãƒ«ãƒ¼ãƒ—ã‚’æŠœã‘ã¦ã‚‚ã©ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ã©ã®ã‚¹ãƒ†ãƒƒãƒ—ã«ã‚‚ä¸€è‡´ã—ãªã‹ã£ãŸå ´åˆã€ã“ã‚Œã¯ä¸æ­£è§£ã®å…¥åŠ›ã§ã™ã€‚
    *   `resetState()` ã‚’å‘¼ã³å‡ºã—ã¦ã€çŠ¶æ…‹ã‚’ç¢ºå®Ÿã«åˆæœŸåŒ–ã—ã¾ã™ã€‚
    *   å‡¦ç†ã‚’çµ‚äº†ã—ã¾ã™ã€‚

---

#### çŠ¶æ…‹ãƒªã‚»ãƒƒãƒˆé–¢æ•°

```javascript
function resetState() {
  activePatternIndex.value = -1;
  currentStepIndex.value = 0;
  clearTimeout(resetTimer);
}
```
ã“ã®é–¢æ•°ã¯ã€æ­£è§£æ™‚ã€ä¸æ­£è§£æ™‚ã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ™‚ã«å‘¼ã°ã‚Œã€åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ã‚’åˆæœŸçŠ¶æ…‹ã«æˆ»ã—ã¾ã™ã€‚


### 4.4. Vueã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (`PreviewArea.vue`, `QuizArea.vue`)

**å¤‰æ›´ç‚¹**: æ­£è§£è¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯ã¯ `shortcutUtils.js` ã® `formatAnswerKeys` ã‚’ä½¿ã†ã ã‘ã§ã€ã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ£ãƒ«å…¥åŠ›ã¨åˆ¥è§£ã®ä¸¡æ–¹ã«å¯¾å¿œã—ãŸæ–‡å­—åˆ—ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚

**å¤‰æ›´å¾Œ (ã‚¤ãƒ¡ãƒ¼ã‚¸):**
```javascript
// ...
import { getRequiredKeysForQuestion, formatAnswerKeys } from '@/composables/shortcutUtils.js';

const formattedKeys = computed(() => {
  const answerPatterns = getRequiredKeysForQuestion(props.question, props.isMac);
  // ã“ã®é–¢æ•°ã‚’å‘¼ã¶ã ã‘ã§ã€"Alt + I â†’ W / Ctrl + Shift + ArrowDown" ã®ã‚ˆã†ãªæ–‡å­—åˆ—ãŒè¿”ã‚‹
  return formatAnswerKeys(answerPatterns);
});
// ...
```
