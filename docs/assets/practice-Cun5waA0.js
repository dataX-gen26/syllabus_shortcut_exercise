import{_ as G,f as l,g as r,h as H,i as J,c as v,a as t,k as B,j as g,F as A,b as T,l as O,w as W,r as Y,t as k,u as Z,o as u,m as M,n as F,d as ee}from"./index-DPBK0GPR.js";import{g as se,b as E,i as te,e as ne,c as ae,a as le,s as ue}from"./shortcutUtils-D8s83kok.js";import{Q as oe,C as re,P as ie}from"./PreviewArea-C2JJQOTG.js";const ce="/syllabus_shortcut_exercise/assets/pine-CKXDeBNA.png",ve="/syllabus_shortcut_exercise/assets/bamboo-IuMqXR1i.png",de="/syllabus_shortcut_exercise/assets/plum-BcLq_q8F.png",fe={class:"page-wrapper"},me={class:"container"},pe={class:"level-selection"},ye=["onClick","onKeydown"],ge=["src"],he={class:"card-title"},_e={key:0,class:"title-wrapper"},we={class:"current-question-number"},ke={key:1,class:"end-message"},be={__name:"practice",setup(Ce){const m=te(),N={上級:ce,中級:ve,初級:de},p=l("select"),K=["初級","中級","上級"],h=l(null),o=l([]),i=l(0),n=l(!1),d=l(!1),a=l(!1),y=l(!1),f=l(new Set),_=r(()=>!o.value.length||i.value>=o.value.length?null:o.value[i.value]),R=r(()=>{var s;return((s=_.value)==null?void 0:s.name)||"ここに問題文が表示されます"}),D=r(()=>{var s;return((s=_.value)==null?void 0:s.id)||null}),V=r(()=>{var s;return((s=_.value)==null?void 0:s.level)||null}),b=r(()=>se(_.value,m)),L=r(()=>i.value>=o.value.length-1),S=r(()=>[]),$=r(()=>{const s={};return K.forEach(e=>{s[e]=E.filter(x=>x.level===e).length}),s});function w(s){h.value=s,o.value=ue(E.filter(e=>e.level===s)),o.value.length>0?(i.value=0,f.value.clear(),n.value=!0,d.value=!1,a.value=!1,y.value=!1,p.value="playing"):alert("この難易度の問題はありません。")}function U(){h.value&&w(h.value)}function q(s){if(!n.value||a.value)return;s.preventDefault();const e=ne(s,m);f.value=new Set(e),!(e.length===1&&e[0]==="shift")&&(ae(s,b.value,m)?X():le(s,b.value,m))}function P(){a.value||setTimeout(()=>{f.value.clear()},100)}function X(){a.value=!0,setTimeout(()=>{L.value?C():I()},500)}function j(){!n.value||a.value||(y.value=!0,a.value=!0,setTimeout(()=>{L.value?C():I()},500))}function I(){i.value++,f.value.clear(),a.value=!1,y.value=!1}function C(){n.value=!1,d.value=!0,p.value="finished"}function z(){h.value=null,o.value=[],i.value=0,f.value.clear(),n.value=!1,d.value=!1,a.value=!1,y.value=!1,p.value="select"}return H(()=>{document.addEventListener("keydown",q),document.addEventListener("keyup",P)}),J(()=>{document.removeEventListener("keydown",q),document.removeEventListener("keyup",P)}),(s,e)=>{const x=Y("router-link");return u(),v("div",fe,[t("div",me,[p.value==="select"?(u(),v(A,{key:0},[e[1]||(e[1]=t("h1",null,"練習モード",-1)),e[2]||(e[2]=t("p",null,"練習したいショートカットの難易度を選択してください。",-1)),t("div",pe,[(u(),v(A,null,O(K,c=>t("div",{class:"mode-card",key:c,onClick:Q=>w(c),role:"button",tabindex:"0",onKeydown:[M(F(Q=>w(c),["prevent"]),["enter"]),M(F(Q=>w(c),["prevent"]),["space"])]},[t("img",{src:N[c],alt:"レベルアイコン"},null,8,ge),t("div",he,k(c),1),t("span",null,"問題数: "+k($.value[c]),1)],40,ye)),64))]),T(x,{class:"basic-button",to:"/"},{default:W(()=>e[0]||(e[0]=[ee("モード選択に戻る")])),_:1,__:[0]})],64)):(u(),v(A,{key:1},[n.value?(u(),v("div",_e,[e[3]||(e[3]=t("h1",null,"練習モード",-1)),e[4]||(e[4]=t("p",null,"問題の操作を行うショートカットキーを押してください。",-1)),t("span",we,"第 "+k(i.value+1)+" 問 / 全 "+k(o.value.length)+" 問",1)])):g("",!0),T(oe,{isPlaying:n.value,gameFinished:d.value,questionText:R.value,questionLevel:V.value,showCorrectAnimation:a.value,isRevealAnswer:y.value,currentCorrectKeys:b.value,isMac:Z(m),pressedKeys:f.value},null,8,["isPlaying","gameFinished","questionText","questionLevel","showCorrectAnimation","isRevealAnswer","currentCorrectKeys","isMac","pressedKeys"]),d.value?(u(),v("div",ke,[e[5]||(e[5]=t("h1",null,"終了！",-1)),e[6]||(e[6]=t("p",null,"お疲れ様でした！",-1)),t("div",{class:"buttons"},[t("button",{class:"basic-button",onClick:U},"もう一度挑戦"),t("button",{class:"basic-button",onClick:z},"難易度選択に戻る")])])):g("",!0),d.value?g("",!0):(u(),B(re,{key:2,isPlaying:n.value,showCorrectAnimation:a.value,startButtonText:"やり直す",onRevealAnswer:j},null,8,["isPlaying","showCorrectAnimation"])),n.value?(u(),v("p",{key:3,class:"end-game",onClick:C},"終了する")):g("",!0)],64))]),p.value==="playing"?(u(),B(ie,{key:0,currentQuestionId:D.value,isPlaying:n.value,previewImages:S.value},null,8,["currentQuestionId","isPlaying","previewImages"])):g("",!0)])}}},Le=G(be,[["__scopeId","data-v-9dc33a0b"]]);export{Le as default};
