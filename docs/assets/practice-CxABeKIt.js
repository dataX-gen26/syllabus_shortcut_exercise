import{_ as G,f as l,g as r,h as H,i as J,c as v,a as t,k as B,j as y,F as x,b as T,l as O,w as W,r as Y,t as k,u as Z,o as u,m as F,n as M,d as ee}from"./index-BhYl72x9.js";import{g as se,a as E,i as te,e as ne,c as ae,s as le}from"./shortcutUtils-D9RF4-mS.js";import{Q as ue,C as oe,P as re}from"./PreviewArea-CKfKSKpE.js";const ie="/syllabus_shortcut_exercise/assets/pine-CKXDeBNA.png",ce="/syllabus_shortcut_exercise/assets/bamboo-IuMqXR1i.png",ve="/syllabus_shortcut_exercise/assets/plum-BcLq_q8F.png",de={class:"page-wrapper"},fe={class:"container"},me={class:"level-selection"},pe=["onClick","onKeydown"],ye=["src"],ge={class:"card-title"},_e={key:0,class:"title-wrapper"},we={class:"current-question-number"},he={key:1,class:"end-message"},ke={__name:"practice",setup(be){const g=te(),N={上級:ie,中級:ce,初級:ve},m=l("select"),A=["初級","中級","上級"],_=l(null),o=l([]),i=l(0),n=l(!1),d=l(!1),a=l(!1),p=l(!1),f=l(new Set),w=r(()=>!o.value.length||i.value>=o.value.length?null:o.value[i.value]),R=r(()=>{var e;return((e=w.value)==null?void 0:e.name)||"ここに問題文が表示されます"}),D=r(()=>{var e;return((e=w.value)==null?void 0:e.id)||null}),V=r(()=>{var e;return((e=w.value)==null?void 0:e.level)||null}),K=r(()=>se(w.value,g)),L=r(()=>i.value>=o.value.length-1),S=r(()=>[]),$=r(()=>{const e={};return A.forEach(s=>{e[s]=E.filter(C=>C.level===s).length}),e});function h(e){_.value=e,o.value=le(E.filter(s=>s.level===e)),o.value.length>0?(i.value=0,f.value.clear(),n.value=!0,d.value=!1,a.value=!1,p.value=!1,m.value="playing"):alert("この難易度の問題はありません。")}function U(){_.value&&h(_.value)}function q(e){!n.value||a.value||(e.preventDefault(),f.value=new Set(ne(e,g)),ae(e,K.value,g)&&X())}function P(){a.value||setTimeout(()=>{f.value.clear()},100)}function X(){a.value=!0,setTimeout(()=>{L.value?b():I()},500)}function j(){!n.value||a.value||(p.value=!0,a.value=!0,setTimeout(()=>{L.value?b():I()},500))}function I(){i.value++,f.value.clear(),a.value=!1,p.value=!1}function b(){n.value=!1,d.value=!0,m.value="finished"}function z(){_.value=null,o.value=[],i.value=0,f.value.clear(),n.value=!1,d.value=!1,a.value=!1,p.value=!1,m.value="select"}return H(()=>{document.addEventListener("keydown",q),document.addEventListener("keyup",P)}),J(()=>{document.removeEventListener("keydown",q),document.removeEventListener("keyup",P)}),(e,s)=>{const C=Y("router-link");return u(),v("div",de,[t("div",fe,[m.value==="select"?(u(),v(x,{key:0},[s[1]||(s[1]=t("h1",null,"練習モード",-1)),s[2]||(s[2]=t("p",null,"練習したいショートカットの難易度を選択してください。",-1)),t("div",me,[(u(),v(x,null,O(A,c=>t("div",{class:"mode-card",key:c,onClick:Q=>h(c),role:"button",tabindex:"0",onKeydown:[F(M(Q=>h(c),["prevent"]),["enter"]),F(M(Q=>h(c),["prevent"]),["space"])]},[t("img",{src:N[c],alt:"レベルアイコン"},null,8,ye),t("div",ge,k(c),1),t("span",null,"問題数: "+k($.value[c]),1)],40,pe)),64))]),T(C,{class:"basic-button",to:"/"},{default:W(()=>s[0]||(s[0]=[ee("モード選択に戻る")])),_:1,__:[0]})],64)):(u(),v(x,{key:1},[n.value?(u(),v("div",_e,[s[3]||(s[3]=t("h1",null,"練習モード",-1)),s[4]||(s[4]=t("p",null,"問題の操作を行うショートカットキーを押してください。",-1)),t("span",we,"第 "+k(i.value+1)+" 問 / 全 "+k(o.value.length)+" 問",1)])):y("",!0),T(ue,{isPlaying:n.value,gameFinished:d.value,questionText:R.value,questionLevel:V.value,showCorrectAnimation:a.value,isRevealAnswer:p.value,currentCorrectKeys:K.value,isMac:Z(g),pressedKeys:f.value},null,8,["isPlaying","gameFinished","questionText","questionLevel","showCorrectAnimation","isRevealAnswer","currentCorrectKeys","isMac","pressedKeys"]),d.value?(u(),v("div",he,[s[5]||(s[5]=t("h1",null,"終了！",-1)),s[6]||(s[6]=t("p",null,"お疲れ様でした！",-1)),t("div",{class:"buttons"},[t("button",{class:"basic-button",onClick:U},"もう一度挑戦"),t("button",{class:"basic-button",onClick:z},"難易度選択に戻る")])])):y("",!0),d.value?y("",!0):(u(),B(oe,{key:2,isPlaying:n.value,showCorrectAnimation:a.value,startButtonText:"やり直す",onRevealAnswer:j},null,8,["isPlaying","showCorrectAnimation"])),n.value?(u(),v("p",{key:3,class:"end-game",onClick:b},"終了する")):y("",!0)],64))]),m.value==="playing"?(u(),B(re,{key:0,currentQuestionId:D.value,isPlaying:n.value,previewImages:S.value},null,8,["currentQuestionId","isPlaying","previewImages"])):y("",!0)])}}},Ke=G(ke,[["__scopeId","data-v-41bc090a"]]);export{Ke as default};
